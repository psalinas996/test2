{
  "name": "Resume Tailor → JSON + Google Drive .docx",
  "nodes": [
    {
      "parameters": {
        "path": "resume-tailor",
        "methods": ["POST"],
        "options": { "response": "LastNode" }
      },
      "id": "WebhookTrigger",
      "name": "Webhook — Receive Inputs",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [-900, 0]
    },
    {
      "parameters": {
        "functionCode": "const body = items[0].json || {};\nconst jd = (body.job_description || '').trim();\nconst resume = (body.resume_text || '').trim();\nconst linkedin = (body.linkedin_profile || '').trim();\nconst placeholders = Boolean(body.use_placeholders_for_missing_metrics);\nif (!jd) throw new Error('Missing job_description');\nif (!resume && !linkedin) throw new Error('Missing resume_text (or linkedin_profile)');\nreturn [{ json: { job_description: jd, resume_text: resume || linkedin, use_placeholders_for_missing_metrics: placeholders } }];"
      },
      "id": "NormalizeInputs",
      "name": "Function — Normalize Inputs",
      "type": "n8n-nodes-base.function",
      "typeVersion": 2,
      "position": [-650, 0]
    },
    {
      "parameters": {
        "model": "gpt-4o",
        "temperature": 0.2,
        "responseFormat": "json",
        "messages": "SYSTEM:\nYou are an expert resume writer with 20+ years of experience in tech & analytics. Be concise, structured, and ATS-aware.\n\nUSER:\nDeeply analyze the following job description and return ONLY JSON with this schema:\n{\n  \"top_3_responsibilities\": [\"…\", \"…\", \"…\"],\n  \"why_these_matter\": \"2–4 sentences focusing on hiring manager + ATS impact\"\n}\n\nJob Description:\n{{ $json.job_description }}"
      },
      "id": "LLM1_Top3",
      "name": "LLM — Extract Top 3 Responsibilities",
      "type": "n8n-nodes-base.openAiChat",
      "typeVersion": 1,
      "credentials": { "openAiApi": { "id": "YOUR_OPENAI_CREDENTIAL_ID" } },
      "position": [-400, 0]
    },
    {
      "parameters": { "mode": "mergeByIndex" },
      "id": "Merge_A_NormalizePlusTop3",
      "name": "Merge — Inputs + Top3",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2,
      "position": [-200, 0]
    },
    {
      "parameters": {
        "model": "gpt-4o",
        "temperature": 0.2,
        "responseFormat": "json",
        "messages": "SYSTEM:\nYou are an expert resume writer (20+ yrs) and ATS specialist. You MUST NOT fabricate experience, employers, titles, dates, tools, or metrics. Only rephrase, reorganize, and highlight content that ALREADY EXISTS in the provided resume.\n\nUSER:\nUsing ONLY the content in my base resume below, tailor it to the data/analytics role. Prioritize
